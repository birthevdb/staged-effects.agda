<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Staged.Expression.Lambda</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Staged.Expression.Lambda.html" class="Module">Staged.Expression.Lambda</a> <a id="33" class="Keyword">where</a>

<a id="40" class="Keyword">open</a> <a id="45" class="Keyword">import</a> <a id="52" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="61" class="Keyword">open</a> <a id="66" class="Keyword">import</a> <a id="73" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="82" class="Keyword">open</a> <a id="87" class="Keyword">import</a> <a id="94" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="105" class="Keyword">open</a> <a id="110" class="Keyword">import</a> <a id="117" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="127" class="Keyword">open</a> <a id="132" class="Keyword">import</a> <a id="139" href="Data.Bool.html" class="Module">Data.Bool</a>
<a id="149" class="Keyword">open</a> <a id="154" class="Keyword">import</a> <a id="161" href="Data.Product.html" class="Module">Data.Product</a>

<a id="175" class="Keyword">open</a> <a id="180" class="Keyword">import</a> <a id="187" href="Container.html" class="Module">Container</a>
<a id="197" class="Keyword">open</a> <a id="202" class="Keyword">import</a> <a id="209" href="Staged.Denote.html" class="Module">Staged.Denote</a>
<a id="223" class="Keyword">open</a> <a id="228" class="Keyword">import</a> <a id="235" href="Staged.Effects.Lambda.html" class="Module">Staged.Effects.Lambda</a>
<a id="257" class="Keyword">open</a> <a id="262" class="Keyword">import</a> <a id="269" href="Staged.Value.Core.html" class="Module">Staged.Value.Core</a>

<a id="288" class="Keyword">module</a> <a id="295" href="Staged.Expression.Lambda.html#295" class="Module">_</a> <a id="297" class="Keyword">where</a>

  <a id="306" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="314" class="Symbol">:</a> <a id="316" href="Container.html#136" class="Record">Con</a>
  <a id="322" href="Container.html#184" class="Field">Con.S</a> <a id="328" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="336" class="Symbol">=</a> <a id="338" class="Symbol">(</a><a id="339" href="Staged.Effects.Lambda.html#620" class="Function">Name</a> <a id="344" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="346" href="Staged.Effects.Lambda.html#620" class="Function">Name</a><a id="350" class="Symbol">)</a> <a id="352" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="354" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a> <a id="356" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="358" href="Staged.Effects.Lambda.html#620" class="Function">Name</a>
  <a id="365" href="Container.html#202" class="Field">Con.P</a> <a id="371" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="379" class="Symbol">(</a><a id="380" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="385" class="Symbol">(</a><a id="386" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="391" href="Staged.Expression.Lambda.html#391" class="Bound">x</a> <a id="393" class="Symbol">))</a> <a id="396" class="Symbol">=</a> <a id="398" href="Data.Empty.html#526" class="Datatype">⊥</a>     <a id="404" class="Comment">-- var x</a>
  <a id="415" href="Container.html#202" class="Field">Con.P</a> <a id="421" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="429" class="Symbol">(</a><a id="430" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="435" class="Symbol">(</a><a id="436" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="441" href="Staged.Expression.Lambda.html#441" class="Bound">y</a> <a id="443" class="Symbol">))</a> <a id="446" class="Symbol">=</a> <a id="448" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>     <a id="454" class="Comment">-- abs x e</a>
  <a id="467" href="Container.html#202" class="Field">Con.P</a> <a id="473" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="481" class="Symbol">(</a><a id="482" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="487" class="Symbol">(</a><a id="488" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="493" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="495" class="Symbol">))</a> <a id="498" class="Symbol">=</a> <a id="500" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>  <a id="506" class="Comment">-- app e e</a>
  <a id="519" href="Container.html#202" class="Field">Con.P</a> <a id="525" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="533" class="Symbol">(</a><a id="534" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="539" class="Symbol">(</a><a id="540" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="545" href="Staged.Expression.Lambda.html#545" class="Bound">y</a> <a id="547" class="Symbol">))</a> <a id="550" class="Symbol">=</a> <a id="552" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>  <a id="558" class="Comment">-- letin x e e</a>

<a id="574" class="Keyword">module</a> <a id="581" href="Staged.Expression.Lambda.html#581" class="Module">_</a> <a id="583" class="Symbol">{</a><a id="584" href="Staged.Expression.Lambda.html#584" class="Bound">V</a> <a id="586" class="Symbol">:</a> <a id="588" class="PrimitiveType">Set</a><a id="591" class="Symbol">}</a> <a id="593" class="Keyword">where</a> 

  <a id="603" href="Staged.Expression.Lambda.html#603" class="Function">⟦lambda⟧</a> <a id="612" class="Symbol">:</a>   <a id="616" class="Symbol">⦃</a> <a id="618" href="Staged.Effects.Lambda.html#801" class="Function">LamOpSig</a> <a id="627" href="Staged.Expression.Lambda.html#584" class="Bound">V</a> <a id="629" href="Staged.Denote.Sig.html#753" class="Record Operator">⊏</a> <a id="631" href="Staged.Denote.Sig.html#1030" class="Generalizable">ζ</a> <a id="633" class="Symbol">⦄</a>
             <a id="648" class="Symbol">→</a> <a id="650" class="Symbol">⦃</a> <a id="652" href="Staged.Effects.Lambda.html#1550" class="Datatype">Closure</a> <a id="660" href="Staged.Expression.Lambda.html#584" class="Bound">V</a> <a id="662" href="Staged.Value.Core.html#125" class="Record Operator">⊂</a> <a id="664" href="Staged.Expression.Lambda.html#584" class="Bound">V</a> <a id="666" class="Symbol">⦄</a>
               <a id="683" class="Comment">------------------</a>
             <a id="715" class="Symbol">→</a> <a id="717" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="725" href="Staged.Denote.Tree.html#1379" class="Record Operator">⟨</a> <a id="727" href="Staged.Denote.Sig.html#1030" class="Generalizable">ζ</a> <a id="729" href="Staged.Denote.Tree.html#1379" class="Record Operator">⟩⇒</a> <a id="732" href="Staged.Expression.Lambda.html#584" class="Bound">V</a>
  
  <a id="739" href="Staged.Denote.Tree.html#1439" class="Field">denote</a> <a id="746" href="Staged.Expression.Lambda.html#603" class="Function">⟦lambda⟧</a> <a id="755" class="Symbol">(</a><a id="756" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="761" class="Symbol">(</a><a id="762" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="767" href="Staged.Expression.Lambda.html#767" class="Bound">x</a><a id="768" class="Symbol">)</a>  <a id="771" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="773" href="Staged.Expression.Lambda.html#773" class="Bound">p</a><a id="774" class="Symbol">)</a> <a id="776" class="Symbol">=</a> <a id="778" href="Staged.Effects.Lambda.html#3486" class="Function">fetch</a> <a id="784" href="Staged.Expression.Lambda.html#767" class="Bound">x</a>
  <a id="788" href="Staged.Denote.Tree.html#1439" class="Field">denote</a> <a id="795" href="Staged.Expression.Lambda.html#603" class="Function">⟦lambda⟧</a> <a id="804" class="Symbol">(</a><a id="805" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="810" class="Symbol">(</a><a id="811" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="816" href="Staged.Expression.Lambda.html#816" class="Bound">y</a><a id="817" class="Symbol">)</a>  <a id="820" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="822" href="Staged.Expression.Lambda.html#822" class="Bound">p</a><a id="823" class="Symbol">)</a> <a id="825" class="Symbol">=</a> <a id="827" href="Staged.Effects.Lambda.html#3710" class="Function">abs</a> <a id="831" href="Staged.Expression.Lambda.html#816" class="Bound">y</a> <a id="833" class="Symbol">(</a><a id="834" href="Staged.Expression.Lambda.html#822" class="Bound">p</a> <a id="836" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="838" class="Symbol">)</a>
  <a id="842" href="Staged.Denote.Tree.html#1439" class="Field">denote</a> <a id="849" href="Staged.Expression.Lambda.html#603" class="Function">⟦lambda⟧</a> <a id="858" class="Symbol">(</a><a id="859" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="864" class="Symbol">(</a><a id="865" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="870" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="872" class="Symbol">)</a> <a id="874" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="876" href="Staged.Expression.Lambda.html#876" class="Bound">p</a><a id="877" class="Symbol">)</a> <a id="879" class="Symbol">=</a> <a id="881" class="Keyword">do</a>
    <a id="888" href="Staged.Expression.Lambda.html#888" class="Bound">v₁</a> <a id="891" href="Staged.Denote.Tree.html#948" class="Function Operator">←</a> <a id="893" href="Staged.Expression.Lambda.html#876" class="Bound">p</a> <a id="895" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a>
    <a id="905" href="Staged.Expression.Lambda.html#905" class="Bound">v₂</a> <a id="908" href="Staged.Denote.Tree.html#948" class="Function Operator">←</a> <a id="910" href="Staged.Expression.Lambda.html#876" class="Bound">p</a> <a id="912" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a>
    <a id="921" href="Staged.Effects.Lambda.html#3931" class="Function">app</a> <a id="925" href="Staged.Expression.Lambda.html#888" class="Bound">v₁</a> <a id="928" href="Staged.Expression.Lambda.html#905" class="Bound">v₂</a>
  <a id="933" href="Staged.Denote.Tree.html#1439" class="Field">denote</a> <a id="940" href="Staged.Expression.Lambda.html#603" class="Function">⟦lambda⟧</a> <a id="949" class="Symbol">(</a><a id="950" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="955" class="Symbol">(</a><a id="956" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="961" href="Staged.Expression.Lambda.html#961" class="Bound">y</a><a id="962" class="Symbol">)</a>  <a id="965" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="967" href="Staged.Expression.Lambda.html#967" class="Bound">p</a><a id="968" class="Symbol">)</a> <a id="970" class="Symbol">=</a> <a id="972" class="Keyword">do</a>
    <a id="979" href="Staged.Expression.Lambda.html#979" class="Bound">v</a> <a id="981" href="Staged.Denote.Tree.html#948" class="Function Operator">←</a> <a id="983" href="Staged.Expression.Lambda.html#967" class="Bound">p</a> <a id="985" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a>
    <a id="995" href="Staged.Effects.Lambda.html#4152" class="Function">letbind</a> <a id="1003" href="Staged.Expression.Lambda.html#961" class="Bound">y</a> <a id="1005" href="Staged.Expression.Lambda.html#979" class="Bound">v</a> <a id="1007" class="Symbol">(</a><a id="1008" href="Staged.Expression.Lambda.html#967" class="Bound">p</a> <a id="1010" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="1014" class="Symbol">)</a>

<a id="1017" class="Keyword">module</a> <a id="1024" href="Staged.Expression.Lambda.html#1024" class="Module">_</a> <a id="1026" class="Keyword">where</a> 

  <a id="1036" href="Staged.Expression.Lambda.html#1036" class="Function">var&#39;</a> <a id="1041" class="Symbol">:</a> <a id="1043" class="Symbol">⦃</a> <a id="1045" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="1053" href="Container.html#717" class="Record Operator">≺</a> <a id="1055" href="Container.html#370" class="Generalizable">C</a> <a id="1057" class="Symbol">⦄</a> <a id="1059" class="Symbol">→</a> <a id="1061" href="Staged.Effects.Lambda.html#620" class="Function">Name</a> <a id="1066" class="Symbol">→</a> <a id="1068" href="Container.html#301" class="Datatype">μ</a> <a id="1070" href="Container.html#370" class="Generalizable">C</a>
  <a id="1074" href="Staged.Expression.Lambda.html#1036" class="Function">var&#39;</a> <a id="1079" href="Staged.Expression.Lambda.html#1079" class="Bound">x</a> <a id="1081" class="Symbol">=</a> <a id="1083" href="Container.html#1040" class="Function">inject</a> <a id="1090" class="Symbol">((</a><a id="1092" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1097" class="Symbol">(</a><a id="1098" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1103" href="Staged.Expression.Lambda.html#1079" class="Bound">x</a><a id="1104" class="Symbol">))</a> <a id="1107" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1109" class="Symbol">λ())</a>

  <a id="1117" href="Staged.Expression.Lambda.html#1117" class="Function">abs&#39;</a> <a id="1122" class="Symbol">:</a> <a id="1124" class="Symbol">⦃</a> <a id="1126" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="1134" href="Container.html#717" class="Record Operator">≺</a> <a id="1136" href="Container.html#370" class="Generalizable">C</a> <a id="1138" class="Symbol">⦄</a> <a id="1140" class="Symbol">→</a> <a id="1142" href="Staged.Effects.Lambda.html#620" class="Function">Name</a> <a id="1147" class="Symbol">→</a> <a id="1149" href="Container.html#301" class="Datatype">μ</a> <a id="1151" href="Container.html#370" class="Generalizable">C</a> <a id="1153" class="Symbol">→</a> <a id="1155" href="Container.html#301" class="Datatype">μ</a> <a id="1157" href="Container.html#370" class="Generalizable">C</a>
  <a id="1161" href="Staged.Expression.Lambda.html#1117" class="Function">abs&#39;</a> <a id="1166" href="Staged.Expression.Lambda.html#1166" class="Bound">x</a> <a id="1168" href="Staged.Expression.Lambda.html#1168" class="Bound">e</a> <a id="1170" class="Symbol">=</a> <a id="1172" href="Container.html#1040" class="Function">inject</a> <a id="1179" class="Symbol">((</a><a id="1181" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1186" class="Symbol">(</a><a id="1187" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1192" href="Staged.Expression.Lambda.html#1166" class="Bound">x</a><a id="1193" class="Symbol">))</a> <a id="1196" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1198" class="Symbol">λ</a> <a id="1200" href="Staged.Expression.Lambda.html#1200" class="Bound">_</a> <a id="1202" class="Symbol">→</a> <a id="1204" href="Staged.Expression.Lambda.html#1168" class="Bound">e</a><a id="1205" class="Symbol">)</a>

  <a id="1210" href="Staged.Expression.Lambda.html#1210" class="Function">app&#39;</a> <a id="1215" class="Symbol">:</a> <a id="1217" class="Symbol">⦃</a> <a id="1219" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="1227" href="Container.html#717" class="Record Operator">≺</a> <a id="1229" href="Container.html#370" class="Generalizable">C</a> <a id="1231" class="Symbol">⦄</a> <a id="1233" class="Symbol">→</a> <a id="1235" href="Container.html#301" class="Datatype">μ</a> <a id="1237" href="Container.html#370" class="Generalizable">C</a> <a id="1239" class="Symbol">→</a> <a id="1241" href="Container.html#301" class="Datatype">μ</a> <a id="1243" href="Container.html#370" class="Generalizable">C</a> <a id="1245" class="Symbol">→</a> <a id="1247" href="Container.html#301" class="Datatype">μ</a> <a id="1249" href="Container.html#370" class="Generalizable">C</a>
  <a id="1253" href="Staged.Expression.Lambda.html#1210" class="Function">app&#39;</a> <a id="1258" href="Staged.Expression.Lambda.html#1258" class="Bound">e₁</a> <a id="1261" href="Staged.Expression.Lambda.html#1261" class="Bound">e₂</a> <a id="1264" class="Symbol">=</a> <a id="1266" href="Container.html#1040" class="Function">inject</a> <a id="1273" class="Symbol">((</a><a id="1275" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1280" class="Symbol">(</a><a id="1281" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1286" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1288" class="Symbol">))</a> <a id="1291" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1293" class="Symbol">λ</a> <a id="1295" class="Symbol">{</a> <a id="1297" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a> <a id="1303" class="Symbol">→</a> <a id="1305" href="Staged.Expression.Lambda.html#1258" class="Bound">e₁</a> <a id="1308" class="Symbol">;</a> <a id="1310" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a> <a id="1315" class="Symbol">→</a> <a id="1317" href="Staged.Expression.Lambda.html#1261" class="Bound">e₂</a> <a id="1320" class="Symbol">})</a>

  <a id="1326" href="Staged.Expression.Lambda.html#1326" class="Function">let&#39;</a> <a id="1331" class="Symbol">:</a> <a id="1333" class="Symbol">⦃</a> <a id="1335" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a> <a id="1343" href="Container.html#717" class="Record Operator">≺</a> <a id="1345" href="Container.html#370" class="Generalizable">C</a> <a id="1347" class="Symbol">⦄</a> <a id="1349" class="Symbol">→</a> <a id="1351" href="Staged.Effects.Lambda.html#620" class="Function">Name</a> <a id="1356" class="Symbol">→</a> <a id="1358" href="Container.html#301" class="Datatype">μ</a> <a id="1360" href="Container.html#370" class="Generalizable">C</a> <a id="1362" class="Symbol">→</a> <a id="1364" href="Container.html#301" class="Datatype">μ</a> <a id="1366" href="Container.html#370" class="Generalizable">C</a> <a id="1368" class="Symbol">→</a> <a id="1370" href="Container.html#301" class="Datatype">μ</a> <a id="1372" href="Container.html#370" class="Generalizable">C</a>
  <a id="1376" href="Staged.Expression.Lambda.html#1326" class="Function">let&#39;</a> <a id="1381" href="Staged.Expression.Lambda.html#1381" class="Bound">x</a> <a id="1383" href="Staged.Expression.Lambda.html#1383" class="Bound">e₁</a> <a id="1386" href="Staged.Expression.Lambda.html#1386" class="Bound">e₂</a> <a id="1389" class="Symbol">=</a> <a id="1391" href="Container.html#1040" class="Function">inject</a> <a id="1398" class="Symbol">((</a><a id="1400" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1405" class="Symbol">(</a><a id="1406" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1411" href="Staged.Expression.Lambda.html#1381" class="Bound">x</a><a id="1412" class="Symbol">))</a> <a id="1415" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1417" class="Symbol">λ</a> <a id="1419" class="Symbol">{</a> <a id="1421" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a> <a id="1427" class="Symbol">→</a> <a id="1429" href="Staged.Expression.Lambda.html#1383" class="Bound">e₁</a> <a id="1432" class="Symbol">;</a> <a id="1434" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a> <a id="1439" class="Symbol">→</a> <a id="1441" href="Staged.Expression.Lambda.html#1386" class="Bound">e₂</a>  <a id="1445" class="Symbol">})</a>
</pre></body></html>
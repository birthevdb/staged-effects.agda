<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Compositional.Core</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--overlapping-instances</a> <a id="37" class="Symbol">#-}</a>

<a id="42" class="Keyword">module</a> <a id="49" href="Compositional.Core.html" class="Module">Compositional.Core</a> <a id="68" class="Keyword">where</a>

<a id="75" class="Keyword">open</a> <a id="80" class="Keyword">import</a> <a id="87" href="Function.html" class="Module">Function</a>
<a id="96" class="Keyword">open</a> <a id="101" class="Keyword">import</a> <a id="108" href="Data.Product.html" class="Module">Data.Product</a>
<a id="121" class="Keyword">open</a> <a id="126" class="Keyword">import</a> <a id="133" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="142" class="Keyword">open</a> <a id="147" class="Keyword">import</a> <a id="154" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="163" class="Keyword">open</a> <a id="168" class="Keyword">import</a> <a id="175" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="185" class="Keyword">open</a> <a id="190" class="Keyword">import</a> <a id="197" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="208" class="Keyword">open</a> <a id="213" class="Keyword">import</a> <a id="220" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="229" class="Keyword">hiding</a> <a id="236" class="Symbol">(</a><a id="237" href="Data.Fin.Base.html#2645" class="Function">inject</a> <a id="244" class="Symbol">;</a> <a id="246" href="Data.Fin.Base.html#6597" class="Datatype Operator">_≺_</a><a id="249" class="Symbol">)</a>

<a id="252" class="Keyword">open</a> <a id="257" class="Keyword">import</a> <a id="264" href="Category.Monad.html" class="Module">Category.Monad</a>

<a id="280" class="Keyword">open</a> <a id="285" class="Keyword">import</a> <a id="292" href="Container.html" class="Module">Container</a>

<a id="303" class="Keyword">module</a> <a id="310" href="Compositional.Core.html#310" class="Module">_</a> <a id="312" class="Keyword">where</a>

  <a id="321" href="Compositional.Core.html#321" class="Function">Name</a> <a id="326" class="Symbol">:</a> <a id="328" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="334" href="Compositional.Core.html#321" class="Function">Name</a> <a id="339" class="Symbol">=</a> <a id="341" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>

  <a id="346" class="Keyword">record</a> <a id="353" href="Compositional.Core.html#353" class="Record">LambdaM</a> <a id="361" class="Symbol">(</a><a id="362" href="Compositional.Core.html#362" class="Bound">M</a> <a id="364" class="Symbol">:</a> <a id="366" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="370" class="Symbol">→</a> <a id="372" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="375" class="Symbol">)</a> <a id="377" class="Symbol">(</a><a id="378" href="Compositional.Core.html#378" class="Bound">V</a>  <a id="381" class="Symbol">:</a> <a id="383" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="386" class="Symbol">)</a> <a id="388" class="Symbol">:</a> <a id="390" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="394" class="Keyword">where</a>
    <a id="404" class="Keyword">field</a> <a id="410" href="Compositional.Core.html#410" class="Field">fetch</a>   <a id="418" class="Symbol">:</a> <a id="420" href="Compositional.Core.html#321" class="Function">Name</a> <a id="425" class="Symbol">→</a> <a id="427" href="Compositional.Core.html#362" class="Bound">M</a> <a id="429" href="Compositional.Core.html#378" class="Bound">V</a>
          <a id="441" href="Compositional.Core.html#441" class="Field">abstr</a>   <a id="449" class="Symbol">:</a> <a id="451" href="Compositional.Core.html#321" class="Function">Name</a> <a id="456" class="Symbol">→</a> <a id="458" href="Compositional.Core.html#362" class="Bound">M</a> <a id="460" href="Compositional.Core.html#378" class="Bound">V</a> <a id="462" class="Symbol">→</a> <a id="464" href="Compositional.Core.html#362" class="Bound">M</a> <a id="466" href="Compositional.Core.html#378" class="Bound">V</a>
          <a id="478" href="Compositional.Core.html#478" class="Field">apply</a>   <a id="486" class="Symbol">:</a> <a id="488" href="Compositional.Core.html#378" class="Bound">V</a> <a id="490" class="Symbol">→</a> <a id="492" href="Compositional.Core.html#378" class="Bound">V</a> <a id="494" class="Symbol">→</a> <a id="496" href="Compositional.Core.html#362" class="Bound">M</a> <a id="498" href="Compositional.Core.html#378" class="Bound">V</a>
          <a id="510" href="Compositional.Core.html#510" class="Field">letbind</a> <a id="518" class="Symbol">:</a> <a id="520" href="Compositional.Core.html#321" class="Function">Name</a> <a id="525" class="Symbol">→</a> <a id="527" href="Compositional.Core.html#378" class="Bound">V</a> <a id="529" class="Symbol">→</a> <a id="531" href="Compositional.Core.html#362" class="Bound">M</a> <a id="533" href="Compositional.Core.html#378" class="Bound">V</a> <a id="535" class="Symbol">→</a> <a id="537" href="Compositional.Core.html#362" class="Bound">M</a> <a id="539" href="Compositional.Core.html#378" class="Bound">V</a>

  <a id="544" class="Keyword">open</a> <a id="549" href="Compositional.Core.html#353" class="Module">LambdaM</a> <a id="557" class="Symbol">⦃...⦄</a> <a id="563" class="Keyword">public</a>

  <a id="573" class="Keyword">record</a> <a id="580" href="Compositional.Core.html#580" class="Record">NatM</a> <a id="585" class="Symbol">(</a><a id="586" href="Compositional.Core.html#586" class="Bound">M</a> <a id="588" class="Symbol">:</a> <a id="590" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="594" class="Symbol">→</a> <a id="596" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="599" class="Symbol">)</a> <a id="601" class="Symbol">(</a><a id="602" href="Compositional.Core.html#602" class="Bound">V</a> <a id="604" class="Symbol">:</a> <a id="606" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="609" class="Symbol">)</a> <a id="611" class="Symbol">:</a> <a id="613" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="617" class="Keyword">where</a>
    <a id="627" class="Keyword">field</a> <a id="633" href="Compositional.Core.html#633" class="Field">nat</a> <a id="637" class="Symbol">:</a> <a id="639" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="641" class="Symbol">→</a> <a id="643" href="Compositional.Core.html#586" class="Bound">M</a> <a id="645" href="Compositional.Core.html#602" class="Bound">V</a>

  <a id="650" class="Keyword">open</a> <a id="655" href="Compositional.Core.html#580" class="Module">NatM</a> <a id="660" class="Symbol">⦃...⦄</a> <a id="666" class="Keyword">public</a>

  <a id="676" class="Keyword">record</a> <a id="683" href="Compositional.Core.html#683" class="Record">StateM</a> <a id="690" class="Symbol">(</a><a id="691" href="Compositional.Core.html#691" class="Bound">M</a> <a id="693" class="Symbol">:</a> <a id="695" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="699" class="Symbol">→</a> <a id="701" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="704" class="Symbol">)</a> <a id="706" class="Symbol">(</a><a id="707" href="Compositional.Core.html#707" class="Bound">S</a> <a id="709" class="Symbol">:</a> <a id="711" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="714" class="Symbol">)</a> <a id="716" class="Symbol">:</a> <a id="718" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="722" class="Keyword">where</a>
    <a id="732" class="Keyword">field</a> <a id="738" href="Compositional.Core.html#738" class="Field">get</a> <a id="742" class="Symbol">:</a> <a id="744" href="Compositional.Core.html#691" class="Bound">M</a> <a id="746" href="Compositional.Core.html#707" class="Bound">S</a>
          <a id="758" href="Compositional.Core.html#758" class="Field">put</a> <a id="762" class="Symbol">:</a> <a id="764" href="Compositional.Core.html#707" class="Bound">S</a> <a id="766" class="Symbol">→</a> <a id="768" href="Compositional.Core.html#691" class="Bound">M</a> <a id="770" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>

  <a id="775" class="Keyword">open</a> <a id="780" href="Compositional.Core.html#683" class="Module">StateM</a> <a id="787" class="Symbol">⦃...⦄</a> <a id="793" class="Keyword">public</a>

  <a id="803" class="Keyword">variable</a> <a id="812" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="814" class="Symbol">:</a> <a id="816" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="820" class="Symbol">→</a> <a id="822" href="Agda.Primitive.html#326" class="Primitive">Set</a>

<a id="827" class="Keyword">module</a> <a id="834" href="Compositional.Core.html#834" class="Module">_</a> <a id="836" class="Symbol">⦃</a> <a id="838" href="Compositional.Core.html#838" class="Bound">_</a> <a id="840" class="Symbol">:</a> <a id="842" href="Category.Monad.html#448" class="Function">RawMonad</a> <a id="851" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="853" class="Symbol">⦄</a> <a id="855" class="Symbol">⦃</a> <a id="857" href="Compositional.Core.html#857" class="Bound">_</a> <a id="859" class="Symbol">:</a> <a id="861" href="Compositional.Core.html#353" class="Record">LambdaM</a> <a id="869" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="871" href="Container.html#373" class="Generalizable">V</a> <a id="873" class="Symbol">⦄</a> <a id="875" class="Keyword">where</a>

  <a id="884" class="Keyword">open</a> <a id="889" href="Category.Monad.html#832" class="Module">RawMonad</a> <a id="898" class="Symbol">⦃...⦄</a>

  <a id="907" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="915" class="Symbol">:</a> <a id="917" href="Container.html#118" class="Record">Con</a>
  <a id="923" href="Container.html#166" class="Field">S</a> <a id="925" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="933" class="Symbol">=</a> <a id="935" href="Compositional.Core.html#321" class="Function">Name</a> <a id="940" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="942" href="Compositional.Core.html#321" class="Function">Name</a> <a id="947" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="949" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a> <a id="951" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="953" href="Compositional.Core.html#321" class="Function">Name</a>
  <a id="960" href="Container.html#184" class="Field">P</a> <a id="962" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="970" class="Symbol">(</a><a id="971" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="976" href="Compositional.Core.html#976" class="Bound">x</a><a id="977" class="Symbol">)</a>               <a id="993" class="Symbol">=</a> <a id="995" href="Data.Empty.html#526" class="Datatype">⊥</a>
  <a id="999" href="Container.html#184" class="Field">P</a> <a id="1001" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="1009" class="Symbol">(</a><a id="1010" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1015" class="Symbol">(</a><a id="1016" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1021" href="Compositional.Core.html#1021" class="Bound">x</a><a id="1022" class="Symbol">))</a>        <a id="1032" class="Symbol">=</a> <a id="1034" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
  <a id="1038" href="Container.html#184" class="Field">P</a> <a id="1040" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="1048" class="Symbol">(</a><a id="1049" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1054" class="Symbol">(</a><a id="1055" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1060" class="Symbol">(</a><a id="1061" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1066" href="Compositional.Core.html#1066" class="Bound">x</a><a id="1067" class="Symbol">)))</a> <a id="1071" class="Symbol">=</a> <a id="1073" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a> <a id="1075" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="1077" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
  <a id="1081" href="Container.html#184" class="Field">P</a> <a id="1083" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="1091" class="Symbol">(</a><a id="1092" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1097" class="Symbol">(</a><a id="1098" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1103" class="Symbol">(</a><a id="1104" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1109" href="Compositional.Core.html#1109" class="Bound">y</a><a id="1110" class="Symbol">)))</a> <a id="1114" class="Symbol">=</a> <a id="1116" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a> <a id="1118" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="1120" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>

  <a id="1125" href="Compositional.Core.html#1125" class="Function">denoteLam</a> <a id="1135" class="Symbol">:</a> <a id="1137" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="1145" href="Container.html#477" class="Function Operator">⇒</a> <a id="1147" href="Compositional.Core.html#851" class="Bound">M</a> <a id="1149" href="Compositional.Core.html#871" class="Bound">V</a>
  <a id="1153" href="Compositional.Core.html#1125" class="Function">denoteLam</a> <a id="1163" class="Symbol">(</a><a id="1164" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1169" href="Compositional.Core.html#1169" class="Bound">x</a> <a id="1171" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1173" href="Compositional.Core.html#1173" class="Bound">p</a><a id="1174" class="Symbol">)</a> <a id="1176" class="Symbol">=</a> <a id="1178" href="Compositional.Core.html#410" class="Field">fetch</a> <a id="1184" href="Compositional.Core.html#1169" class="Bound">x</a>
  <a id="1188" href="Compositional.Core.html#1125" class="Function">denoteLam</a> <a id="1198" class="Symbol">(</a><a id="1199" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1204" class="Symbol">(</a><a id="1205" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1210" href="Compositional.Core.html#1210" class="Bound">x</a><a id="1211" class="Symbol">)</a> <a id="1213" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1215" href="Compositional.Core.html#1215" class="Bound">p</a><a id="1216" class="Symbol">)</a> <a id="1218" class="Symbol">=</a> <a id="1220" href="Compositional.Core.html#441" class="Field">abstr</a> <a id="1226" href="Compositional.Core.html#1210" class="Bound">x</a> <a id="1228" class="Symbol">(</a><a id="1229" href="Compositional.Core.html#1215" class="Bound">p</a> <a id="1231" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1233" class="Symbol">)</a>
  <a id="1237" href="Compositional.Core.html#1125" class="Function">denoteLam</a> <a id="1247" class="Symbol">(</a><a id="1248" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1253" class="Symbol">(</a><a id="1254" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1259" class="Symbol">(</a><a id="1260" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1265" href="Compositional.Core.html#1265" class="Bound">x</a><a id="1266" class="Symbol">))</a> <a id="1269" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1271" href="Compositional.Core.html#1271" class="Bound">p</a><a id="1272" class="Symbol">)</a> <a id="1274" class="Symbol">=</a> <a id="1276" class="Keyword">do</a>
    <a id="1283" href="Compositional.Core.html#1283" class="Bound">v₁</a> <a id="1286" href="Category.Monad.Indexed.html#677" class="Field Operator">←</a> <a id="1288" href="Compositional.Core.html#1271" class="Bound">p</a> <a id="1290" class="Symbol">(</a><a id="1291" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1296" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1298" class="Symbol">)</a>
    <a id="1304" href="Compositional.Core.html#1304" class="Bound">v₂</a> <a id="1307" href="Category.Monad.Indexed.html#677" class="Field Operator">←</a> <a id="1309" href="Compositional.Core.html#1271" class="Bound">p</a> <a id="1311" class="Symbol">(</a><a id="1312" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1317" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1319" class="Symbol">)</a>
    <a id="1325" href="Compositional.Core.html#478" class="Field">apply</a> <a id="1331" href="Compositional.Core.html#1283" class="Bound">v₁</a> <a id="1334" href="Compositional.Core.html#1304" class="Bound">v₂</a>
  <a id="1339" href="Compositional.Core.html#1125" class="Function">denoteLam</a> <a id="1349" class="Symbol">(</a><a id="1350" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1355" class="Symbol">(</a><a id="1356" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1361" class="Symbol">(</a><a id="1362" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1367" href="Compositional.Core.html#1367" class="Bound">y</a><a id="1368" class="Symbol">))</a> <a id="1371" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1373" href="Compositional.Core.html#1373" class="Bound">p</a><a id="1374" class="Symbol">)</a> <a id="1376" class="Symbol">=</a> <a id="1378" class="Keyword">do</a>
    <a id="1385" href="Compositional.Core.html#1385" class="Bound">v</a> <a id="1387" href="Category.Monad.Indexed.html#677" class="Field Operator">←</a> <a id="1389" href="Compositional.Core.html#1373" class="Bound">p</a> <a id="1391" class="Symbol">(</a><a id="1392" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1397" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1399" class="Symbol">)</a>
    <a id="1405" href="Compositional.Core.html#510" class="Field">letbind</a> <a id="1413" href="Compositional.Core.html#1367" class="Bound">y</a> <a id="1415" href="Compositional.Core.html#1385" class="Bound">v</a> <a id="1417" class="Symbol">(</a><a id="1418" href="Compositional.Core.html#1373" class="Bound">p</a> <a id="1420" class="Symbol">(</a><a id="1421" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1426" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1428" class="Symbol">))</a>


  <a id="1435" href="Compositional.Core.html#1435" class="Function">`fetch</a> <a id="1442" class="Symbol">:</a> <a id="1444" class="Symbol">⦃</a> <a id="1446" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="1454" href="Container.html#769" class="Record Operator">≺</a> <a id="1456" href="Container.html#352" class="Generalizable">K</a> <a id="1458" class="Symbol">⦄</a> <a id="1460" class="Symbol">→</a> <a id="1462" href="Compositional.Core.html#321" class="Function">Name</a> <a id="1467" class="Symbol">→</a> <a id="1469" href="Container.html#283" class="Datatype">μ</a> <a id="1471" href="Container.html#352" class="Generalizable">K</a>
  <a id="1475" href="Compositional.Core.html#1435" class="Function">`fetch</a> <a id="1482" href="Compositional.Core.html#1482" class="Bound">x</a> <a id="1484" class="Symbol">=</a> <a id="1486" href="Container.html#1092" class="Function">inject</a> <a id="1493" class="Symbol">(</a><a id="1494" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1499" href="Compositional.Core.html#1482" class="Bound">x</a> <a id="1501" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1503" class="Symbol">λ())</a>

  <a id="1511" href="Compositional.Core.html#1511" class="Function">`abstr</a> <a id="1518" class="Symbol">:</a> <a id="1520" class="Symbol">⦃</a> <a id="1522" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="1530" href="Container.html#769" class="Record Operator">≺</a> <a id="1532" href="Container.html#352" class="Generalizable">K</a> <a id="1534" class="Symbol">⦄</a> <a id="1536" class="Symbol">→</a> <a id="1538" href="Compositional.Core.html#321" class="Function">Name</a> <a id="1543" class="Symbol">→</a> <a id="1545" href="Container.html#283" class="Datatype">μ</a> <a id="1547" href="Container.html#352" class="Generalizable">K</a> <a id="1549" class="Symbol">→</a> <a id="1551" href="Container.html#283" class="Datatype">μ</a> <a id="1553" href="Container.html#352" class="Generalizable">K</a>
  <a id="1557" href="Compositional.Core.html#1511" class="Function">`abstr</a> <a id="1564" href="Compositional.Core.html#1564" class="Bound">x</a> <a id="1566" href="Compositional.Core.html#1566" class="Bound">b</a> <a id="1568" class="Symbol">=</a> <a id="1570" href="Container.html#1092" class="Function">inject</a> <a id="1577" class="Symbol">(</a><a id="1578" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1583" class="Symbol">(</a><a id="1584" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1589" href="Compositional.Core.html#1564" class="Bound">x</a><a id="1590" class="Symbol">)</a> <a id="1592" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1594" class="Symbol">λ</a> <a id="1596" class="Keyword">where</a> <a id="1602" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="1605" class="Symbol">→</a> <a id="1607" href="Compositional.Core.html#1566" class="Bound">b</a><a id="1608" class="Symbol">)</a>
  
  <a id="1615" href="Compositional.Core.html#1615" class="Function">`apply</a> <a id="1622" class="Symbol">:</a> <a id="1624" class="Symbol">⦃</a> <a id="1626" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="1634" href="Container.html#769" class="Record Operator">≺</a> <a id="1636" href="Container.html#352" class="Generalizable">K</a> <a id="1638" class="Symbol">⦄</a> <a id="1640" class="Symbol">→</a> <a id="1642" href="Container.html#283" class="Datatype">μ</a> <a id="1644" href="Container.html#352" class="Generalizable">K</a> <a id="1646" class="Symbol">→</a> <a id="1648" href="Container.html#283" class="Datatype">μ</a> <a id="1650" href="Container.html#352" class="Generalizable">K</a> <a id="1652" class="Symbol">→</a> <a id="1654" href="Container.html#283" class="Datatype">μ</a> <a id="1656" href="Container.html#352" class="Generalizable">K</a>
  <a id="1660" href="Compositional.Core.html#1615" class="Function">`apply</a> <a id="1667" href="Compositional.Core.html#1667" class="Bound">e₁</a> <a id="1670" href="Compositional.Core.html#1670" class="Bound">e₂</a> <a id="1673" class="Symbol">=</a> <a id="1675" href="Container.html#1092" class="Function">inject</a> <a id="1682" class="Symbol">(</a><a id="1683" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1688" class="Symbol">(</a><a id="1689" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1694" class="Symbol">(</a><a id="1695" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1700" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1702" class="Symbol">))</a> <a id="1705" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1707" class="Symbol">λ</a> <a id="1709" class="Keyword">where</a> <a id="1715" class="Symbol">(</a><a id="1716" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1721" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1723" class="Symbol">)</a> <a id="1725" class="Symbol">→</a> <a id="1727" href="Compositional.Core.html#1667" class="Bound">e₁</a>
                                                         <a id="1787" class="Symbol">(</a><a id="1788" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1793" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1795" class="Symbol">)</a> <a id="1797" class="Symbol">→</a> <a id="1799" href="Compositional.Core.html#1670" class="Bound">e₂</a><a id="1801" class="Symbol">)</a>

  <a id="1806" href="Compositional.Core.html#1806" class="Function">`letbind</a> <a id="1815" class="Symbol">:</a> <a id="1817" class="Symbol">⦃</a> <a id="1819" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="1827" href="Container.html#769" class="Record Operator">≺</a> <a id="1829" href="Container.html#352" class="Generalizable">K</a> <a id="1831" class="Symbol">⦄</a> <a id="1833" class="Symbol">→</a> <a id="1835" href="Compositional.Core.html#321" class="Function">Name</a> <a id="1840" class="Symbol">→</a> <a id="1842" href="Container.html#283" class="Datatype">μ</a> <a id="1844" href="Container.html#352" class="Generalizable">K</a> <a id="1846" class="Symbol">→</a> <a id="1848" href="Container.html#283" class="Datatype">μ</a> <a id="1850" href="Container.html#352" class="Generalizable">K</a> <a id="1852" class="Symbol">→</a> <a id="1854" href="Container.html#283" class="Datatype">μ</a> <a id="1856" href="Container.html#352" class="Generalizable">K</a>
  <a id="1860" href="Compositional.Core.html#1806" class="Function">`letbind</a> <a id="1869" href="Compositional.Core.html#1869" class="Bound">x</a> <a id="1871" href="Compositional.Core.html#1871" class="Bound">e</a> <a id="1873" href="Compositional.Core.html#1873" class="Bound">b</a> <a id="1875" class="Symbol">=</a> <a id="1877" href="Container.html#1092" class="Function">inject</a> <a id="1884" class="Symbol">((</a><a id="1886" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1891" class="Symbol">(</a><a id="1892" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1897" class="Symbol">(</a><a id="1898" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1903" href="Compositional.Core.html#1869" class="Bound">x</a><a id="1904" class="Symbol">)))</a> <a id="1908" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1910" class="Symbol">λ</a> <a id="1912" class="Keyword">where</a> <a id="1918" class="Symbol">(</a><a id="1919" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1924" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1926" class="Symbol">)</a> <a id="1928" class="Symbol">→</a> <a id="1930" href="Compositional.Core.html#1871" class="Bound">e</a>
                                                            <a id="1992" class="Symbol">(</a><a id="1993" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1998" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="2000" class="Symbol">)</a> <a id="2002" class="Symbol">→</a> <a id="2004" href="Compositional.Core.html#1873" class="Bound">b</a><a id="2005" class="Symbol">)</a>

<a id="2008" class="Keyword">module</a> <a id="2015" href="Compositional.Core.html#2015" class="Module">_</a> <a id="2017" class="Symbol">⦃</a> <a id="2019" href="Compositional.Core.html#2019" class="Bound">_</a> <a id="2021" class="Symbol">:</a> <a id="2023" href="Category.Monad.html#448" class="Function">RawMonad</a> <a id="2032" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="2034" class="Symbol">⦄</a> <a id="2036" class="Symbol">⦃</a> <a id="2038" href="Compositional.Core.html#2038" class="Bound">_</a> <a id="2040" class="Symbol">:</a> <a id="2042" href="Compositional.Core.html#580" class="Record">NatM</a> <a id="2047" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="2049" href="Container.html#373" class="Generalizable">V</a> <a id="2051" class="Symbol">⦄</a> <a id="2053" class="Keyword">where</a>

  <a id="2062" href="Compositional.Core.html#2062" class="Function">NatExpr</a> <a id="2070" class="Symbol">:</a> <a id="2072" href="Container.html#118" class="Record">Con</a>
  <a id="2078" href="Container.html#166" class="Field">S</a> <a id="2080" href="Compositional.Core.html#2062" class="Function">NatExpr</a>   <a id="2090" class="Symbol">=</a> <a id="2092" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="2096" href="Container.html#184" class="Field">P</a> <a id="2098" href="Compositional.Core.html#2062" class="Function">NatExpr</a> <a id="2106" class="Symbol">_</a> <a id="2108" class="Symbol">=</a> <a id="2110" href="Data.Empty.html#526" class="Datatype">⊥</a>

  <a id="2115" href="Compositional.Core.html#2115" class="Function">denoteNat</a> <a id="2125" class="Symbol">:</a> <a id="2127" href="Compositional.Core.html#2062" class="Function">NatExpr</a> <a id="2135" href="Container.html#477" class="Function Operator">⇒</a> <a id="2137" href="Compositional.Core.html#2032" class="Bound">M</a> <a id="2139" href="Compositional.Core.html#2049" class="Bound">V</a>
  <a id="2143" href="Compositional.Core.html#2115" class="Function">denoteNat</a> <a id="2153" class="Symbol">(</a><a id="2154" href="Compositional.Core.html#2154" class="Bound">n</a> <a id="2156" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2158" class="Symbol">_)</a> <a id="2161" class="Symbol">=</a> <a id="2163" href="Compositional.Core.html#633" class="Field">nat</a> <a id="2167" href="Compositional.Core.html#2154" class="Bound">n</a>

  <a id="2172" href="Compositional.Core.html#2172" class="Function">`nat</a> <a id="2177" class="Symbol">:</a> <a id="2179" class="Symbol">⦃</a> <a id="2181" href="Compositional.Core.html#2062" class="Function">NatExpr</a> <a id="2189" href="Container.html#769" class="Record Operator">≺</a> <a id="2191" href="Container.html#352" class="Generalizable">K</a> <a id="2193" class="Symbol">⦄</a> <a id="2195" class="Symbol">→</a> <a id="2197" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2199" class="Symbol">→</a> <a id="2201" href="Container.html#283" class="Datatype">μ</a> <a id="2203" href="Container.html#352" class="Generalizable">K</a>
  <a id="2207" href="Compositional.Core.html#2172" class="Function">`nat</a> <a id="2212" href="Compositional.Core.html#2212" class="Bound">n</a> <a id="2214" class="Symbol">=</a> <a id="2216" href="Container.html#1092" class="Function">inject</a> <a id="2223" class="Symbol">(</a><a id="2224" href="Compositional.Core.html#2212" class="Bound">n</a> <a id="2226" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2228" class="Symbol">λ())</a>

<a id="2234" class="Keyword">module</a> <a id="2241" href="Compositional.Core.html#2241" class="Module">_</a> <a id="2243" class="Symbol">⦃</a> <a id="2245" href="Compositional.Core.html#2245" class="Bound">_</a> <a id="2247" class="Symbol">:</a> <a id="2249" href="Category.Monad.html#448" class="Function">RawMonad</a> <a id="2258" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="2260" class="Symbol">⦄</a> <a id="2262" class="Symbol">⦃</a> <a id="2264" href="Compositional.Core.html#2264" class="Bound">_</a> <a id="2266" class="Symbol">:</a> <a id="2268" href="Compositional.Core.html#683" class="Record">StateM</a> <a id="2275" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="2277" href="Container.html#373" class="Generalizable">V</a> <a id="2279" class="Symbol">⦄</a> <a id="2281" class="Keyword">where</a>

  <a id="2290" class="Keyword">open</a> <a id="2295" href="Category.Monad.html#832" class="Module">RawMonad</a> <a id="2304" class="Symbol">⦃...⦄</a>

  <a id="2313" href="Compositional.Core.html#2313" class="Function">StateExpr</a> <a id="2323" class="Symbol">:</a> <a id="2325" href="Container.html#118" class="Record">Con</a>
  <a id="2331" href="Container.html#166" class="Field">S</a> <a id="2333" href="Compositional.Core.html#2313" class="Function">StateExpr</a> <a id="2343" class="Symbol">=</a> <a id="2345" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a> <a id="2347" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="2349" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
  <a id="2353" href="Container.html#184" class="Field">P</a> <a id="2355" href="Compositional.Core.html#2313" class="Function">StateExpr</a> <a id="2365" class="Symbol">(</a><a id="2366" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="2371" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="2373" class="Symbol">)</a> <a id="2375" class="Symbol">=</a> <a id="2377" href="Data.Empty.html#526" class="Datatype">⊥</a>
  <a id="2381" href="Container.html#184" class="Field">P</a> <a id="2383" href="Compositional.Core.html#2313" class="Function">StateExpr</a> <a id="2393" class="Symbol">(</a><a id="2394" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="2399" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="2401" class="Symbol">)</a> <a id="2403" class="Symbol">=</a> <a id="2405" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>

  <a id="2410" href="Compositional.Core.html#2410" class="Function">denoteState</a> <a id="2422" class="Symbol">:</a> <a id="2424" href="Compositional.Core.html#2313" class="Function">StateExpr</a> <a id="2434" href="Container.html#477" class="Function Operator">⇒</a> <a id="2436" href="Compositional.Core.html#2258" class="Bound">M</a> <a id="2438" href="Compositional.Core.html#2277" class="Bound">V</a>
  <a id="2442" href="Compositional.Core.html#2410" class="Function">denoteState</a> <a id="2454" class="Symbol">(</a><a id="2455" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="2460" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="2463" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2465" class="Symbol">_)</a> <a id="2468" class="Symbol">=</a> <a id="2470" href="Compositional.Core.html#738" class="Field">get</a>
  <a id="2476" href="Compositional.Core.html#2410" class="Function">denoteState</a> <a id="2488" class="Symbol">(</a><a id="2489" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="2494" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="2497" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2499" href="Compositional.Core.html#2499" class="Bound">p</a><a id="2500" class="Symbol">)</a> <a id="2502" class="Symbol">=</a> <a id="2504" class="Keyword">do</a>
    <a id="2511" href="Compositional.Core.html#2511" class="Bound">v</a> <a id="2513" href="Category.Monad.Indexed.html#677" class="Field Operator">←</a> <a id="2515" href="Compositional.Core.html#2499" class="Bound">p</a> <a id="2517" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
    <a id="2524" href="Compositional.Core.html#758" class="Field">put</a> <a id="2528" href="Compositional.Core.html#2511" class="Bound">v</a>
    <a id="2534" href="Category.Monad.Indexed.html#644" class="Field">return</a> <a id="2541" href="Compositional.Core.html#2511" class="Bound">v</a>

  <a id="2546" href="Compositional.Core.html#2546" class="Function">`get</a> <a id="2551" class="Symbol">:</a> <a id="2553" class="Symbol">⦃</a> <a id="2555" href="Compositional.Core.html#2313" class="Function">StateExpr</a> <a id="2565" href="Container.html#769" class="Record Operator">≺</a> <a id="2567" href="Container.html#352" class="Generalizable">K</a> <a id="2569" class="Symbol">⦄</a> <a id="2571" class="Symbol">→</a> <a id="2573" href="Container.html#283" class="Datatype">μ</a> <a id="2575" href="Container.html#352" class="Generalizable">K</a>
  <a id="2579" href="Compositional.Core.html#2546" class="Function">`get</a> <a id="2584" class="Symbol">=</a> <a id="2586" href="Container.html#1092" class="Function">inject</a> <a id="2593" class="Symbol">(</a><a id="2594" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="2599" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="2602" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2604" class="Symbol">λ())</a>

  <a id="2612" href="Compositional.Core.html#2612" class="Function">`put</a> <a id="2617" class="Symbol">:</a> <a id="2619" class="Symbol">⦃</a> <a id="2621" href="Compositional.Core.html#2313" class="Function">StateExpr</a> <a id="2631" href="Container.html#769" class="Record Operator">≺</a> <a id="2633" href="Container.html#352" class="Generalizable">K</a> <a id="2635" class="Symbol">⦄</a> <a id="2637" class="Symbol">→</a> <a id="2639" href="Container.html#283" class="Datatype">μ</a> <a id="2641" href="Container.html#352" class="Generalizable">K</a> <a id="2643" class="Symbol">→</a> <a id="2645" href="Container.html#283" class="Datatype">μ</a> <a id="2647" href="Container.html#352" class="Generalizable">K</a>
  <a id="2651" href="Compositional.Core.html#2612" class="Function">`put</a> <a id="2656" href="Compositional.Core.html#2656" class="Bound">e</a> <a id="2658" class="Symbol">=</a> <a id="2660" href="Container.html#1092" class="Function">inject</a> <a id="2667" class="Symbol">((</a><a id="2669" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="2674" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="2676" class="Symbol">)</a> <a id="2678" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2680" class="Symbol">(λ</a> <a id="2683" class="Keyword">where</a> <a id="2689" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="2692" class="Symbol">→</a> <a id="2694" href="Compositional.Core.html#2656" class="Bound">e</a><a id="2695" class="Symbol">))</a>
    
<a id="2703" class="Keyword">module</a> <a id="2710" href="Compositional.Core.html#2710" class="Module">_</a> <a id="2712" class="Symbol">⦃</a> <a id="2714" href="Compositional.Core.html#2714" class="Bound">_</a> <a id="2716" class="Symbol">:</a> <a id="2718" href="Category.Monad.html#448" class="Function">RawMonad</a> <a id="2727" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="2729" class="Symbol">⦄</a> <a id="2731" class="Symbol">⦃</a> <a id="2733" href="Compositional.Core.html#2733" class="Bound">_</a> <a id="2735" class="Symbol">:</a> <a id="2737" href="Compositional.Core.html#353" class="Record">LambdaM</a> <a id="2745" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="2747" href="Container.html#373" class="Generalizable">V</a> <a id="2749" class="Symbol">⦄</a> <a id="2751" class="Symbol">⦃</a> <a id="2753" href="Compositional.Core.html#2753" class="Bound">_</a> <a id="2755" class="Symbol">:</a> <a id="2757" href="Compositional.Core.html#580" class="Record">NatM</a> <a id="2762" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="2764" href="Container.html#373" class="Generalizable">V</a> <a id="2766" class="Symbol">⦄</a> <a id="2768" class="Symbol">⦃</a> <a id="2770" href="Compositional.Core.html#2770" class="Bound">_</a> <a id="2772" class="Symbol">:</a> <a id="2774" href="Compositional.Core.html#683" class="Record">StateM</a> <a id="2781" href="Compositional.Core.html#812" class="Generalizable">M</a> <a id="2783" href="Container.html#373" class="Generalizable">V</a> <a id="2785" class="Symbol">⦄</a> <a id="2787" class="Keyword">where</a>

  <a id="2796" class="Keyword">open</a> <a id="2801" href="Category.Monad.html#832" class="Module">RawMonad</a> <a id="2810" class="Symbol">⦃...⦄</a>
  <a id="2818" class="Keyword">open</a> <a id="2823" href="Container.html#769" class="Module Operator">_≺_</a> <a id="2827" class="Symbol">⦃...⦄</a>

  <a id="2836" class="Comment">-- Compose Expressions</a>
  <a id="2861" href="Compositional.Core.html#2861" class="Function">Expr</a>   <a id="2868" class="Symbol">=</a> <a id="2870" href="Compositional.Core.html#907" class="Function">LamExpr</a> <a id="2878" href="Container.html#624" class="Function Operator">∪</a> <a id="2880" class="Symbol">(</a><a id="2881" href="Compositional.Core.html#2062" class="Function">NatExpr</a> <a id="2889" href="Container.html#624" class="Function Operator">∪</a> <a id="2891" href="Compositional.Core.html#2313" class="Function">StateExpr</a><a id="2900" class="Symbol">)</a>

  <a id="2905" class="Comment">-- Compose Semantic Algebras</a>
  <a id="2936" href="Compositional.Core.html#2936" class="Function">denote</a> <a id="2943" class="Symbol">=</a> <a id="2945" href="Compositional.Core.html#1125" class="Function">denoteLam</a> <a id="2955" href="Container.html#1196" class="Function Operator">⊙</a> <a id="2957" href="Compositional.Core.html#2115" class="Function">denoteNat</a> <a id="2967" href="Container.html#1196" class="Function Operator">⊙</a> <a id="2969" href="Compositional.Core.html#2410" class="Function">denoteState</a> 

  
</pre></body></html>